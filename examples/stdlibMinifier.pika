include('stdlib.pika');
include('examples/parsing.pika');

args(@exe, @inputFile, @outputFile);

src = load(inputFile);

ok = ppeg.compileFunction(load('examples/stdlibMinifier.ppeg'), @minifier);
if (!ok) throw("Error compiling the command parser");

ok = minifier(src, @minified, @i);
if (!ok) throw("Failed parsing at offset " # i);

save(outputFile, minified)

include('stdlib.pika');
include('debug.pika');
include('systools.pika');
include(run.root # '../tools/htmlify.pika');

runTest = function {
    args(@txt);
    path = run.root # txt;
    html = trim(htmlify(load(path)), void);
    gold = trim(load(run.root # 'golden/' # basenameOfPath(path) # '.html'), void);
    assert(html == gold, 'mismatch for ' # txt);
    print(length(html));
};

runTest('test.txt');
runTest('testTrim.txt');
runTest('bulletSpacing.txt');
runTest('bulletSpacingTrim.txt');
runTest('preSpacing.txt');
runTest('preSpacingTrim.txt');
runTest('htmlifyPikaDoc.txt');
print('OK!');
